-- Modern SoccerBall Teleporter GUI - BUG-FREE + NO-CLIP TELEPORT (goes through walls/floors/anything)
-- Paste into executor / command bar

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

local function createGUI()
    local playerGui = player:WaitForChild("PlayerGui", 8)
    if not playerGui then return end

    -- Clean old GUI
    local old = playerGui:FindFirstChild("ModernSoccerGui")
    if old then old:Destroy() end

    local sg = Instance.new("ScreenGui")
    sg.Name = "ModernSoccerGui"
    sg.ResetOnSpawn = false
    sg.DisplayOrder = 15
    sg.Parent = playerGui

    local main = Instance.new("Frame")
    main.Size = UDim2.new(0, 320, 0, 200)
    main.Position = UDim2.new(0.5, -160, 0.5, -100)
    main.BackgroundColor3 = Color3.fromRGB(18, 18, 28)
    main.BorderSizePixel = 0
    main.ClipsDescendants = true
    main.Active = true
    main.Draggable = true
    main.Parent = sg

    local uiCorner = Instance.new("UICorner")
    uiCorner.CornerRadius = UDim.new(0, 16)
    uiCorner.Parent = main

    local uiStroke = Instance.new("UIStroke")
    uiStroke.Color = Color3.fromRGB(80, 120, 255)
    uiStroke.Transparency = 0.65
    uiStroke.Thickness = 1.5
    uiStroke.Parent = main

    -- Title bar
    local titleBar = Instance.new("Frame")
    titleBar.Size = UDim2.new(1, 0, 0, 44)
    titleBar.BackgroundColor3 = Color3.fromRGB(28, 28, 44)
    titleBar.BorderSizePixel = 0
    titleBar.Parent = main

    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 16)
    titleCorner.Parent = titleBar

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, -60, 1, 0)
    title.Position = UDim2.new(0, 16, 0, 0)
    title.BackgroundTransparency = 1
    title.Font = Enum.Font.GothamBold
    title.Text = "Soccer Ball Teleporter"
    title.TextColor3 = Color3.fromRGB(220, 220, 255)
    title.TextSize = 18
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = titleBar

    -- Close button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 32, 0, 32)
    closeBtn.Position = UDim2.new(1, -40, 0, 6)
    closeBtn.BackgroundColor3 = Color3.fromRGB(235, 70, 70)
    closeBtn.Text = "×"
    closeBtn.TextColor3 = Color3.new(1,1,1)
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 24
    closeBtn.Parent = titleBar

    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = closeBtn

    closeBtn.MouseButton1Click:Connect(function()
        sg:Destroy()
    end)

    -- Status
    local status = Instance.new("TextLabel")
    status.Size = UDim2.new(1, -32, 0, 36)
    status.Position = UDim2.new(0, 16, 0, 54)
    status.BackgroundTransparency = 1
    status.Font = Enum.Font.GothamSemibold
    status.Text = "Ready"
    status.TextColor3 = Color3.fromRGB(140, 200, 255)
    status.TextSize = 17
    status.TextXAlignment = Enum.TextXAlignment.Left
    status.Parent = main

    -- Button
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -32, 0, 64)
    btn.Position = UDim2.new(0, 16, 1, -84)
    btn.BackgroundColor3 = Color3.fromRGB(60, 160, 255)
    btn.Text = "Teleport Ball → Me"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 20
    btn.Parent = main

    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 12)
    btnCorner.Parent = btn

    local btnStroke = Instance.new("UIStroke")
    btnStroke.Color = Color3.fromRGB(100, 180, 255)
    btnStroke.Thickness = 2
    btnStroke.Transparency = 0.4
    btnStroke.Parent = btn

    -- Click animation
    local function playClickAnim()
        local ti = TweenInfo.new(0.12, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local scaleDown = TweenService:Create(btn, ti, {Size = UDim2.new(1, -40, 0, 60)})
        local colorDim  = TweenService:Create(btn, ti, {BackgroundColor3 = Color3.fromRGB(40, 120, 220)})
        scaleDown:Play() colorDim:Play()

        scaleDown.Completed:Connect(function()
            local tiBack = TweenInfo.new(0.22, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
            TweenService:Create(btn, tiBack, {Size = UDim2.new(1, -32, 0, 64)}):Play()
            TweenService:Create(btn, tiBack, {BackgroundColor3 = Color3.fromRGB(60, 160, 255)}):Play()
        end)
    end

    -- Teleport logic (goes through anything + fixes sticking)
    local function doTeleport()
        playClickAnim()

        local char = player.Character
        if not char then
            status.Text = "No character yet"
            status.TextColor3 = Color3.fromRGB(255, 180, 100)
            task.delay(3, function() if status then status.Text = "Ready" status.TextColor3 = Color3.fromRGB(140, 200, 255) end end)
            return
        end

        local hrp = char:FindFirstChild("HumanoidRootPart") or char:WaitForChild("HumanoidRootPart", 5)
        if not hrp then
            status.Text = "No root part"
            status.TextColor3 = Color3.fromRGB(255, 120, 120)
            task.delay(3, function() if status then status.Text = "Ready" status.TextColor3 = Color3.fromRGB(140, 200, 255) end end)
            return
        end

        local targetCFrame = hrp.CFrame * CFrame.new(0, 5.5, 0)  -- above head

        local count = 0
        for _, part in ipairs(workspace:GetDescendants()) do
            if part:IsA("BasePart") and part.Name == "SoccerBall" then
                local wasAnchored = part.Anchored
                local oldCanCollide = part.CanCollide

                -- Make it ignore collisions temporarily
                part.Anchored = false
                part.CanCollide = false

                -- Teleport (CFrame = ignores physics/collisions)
                part.CFrame = targetCFrame + Vector3.new(0, (count * 2), 0)  -- slight stack offset if multiple

                -- Clean velocity
                part.Velocity = Vector3.new()
                part.RotVelocity = Vector3.new()

                -- Restore original state after tiny delay (physics settle)
                task.delay(0.1, function()
                    if part and part.Parent then
                        part.CanCollide = oldCanCollide
                        part.Anchored = wasAnchored
                    end
                end)

                count += 1
            end
        end

        if count == 0 then
            status.Text = "No soccer balls found"
            status.TextColor3 = Color3.fromRGB(255, 180, 100)
        else
            status.Text = "Teleported " .. count .. " ball" .. (count == 1 and "" or "s") .. " (through anything!)"
            status.TextColor3 = Color3.fromRGB(100, 255, 140)
        end

        task.delay(4, function()
            if status and status.Parent then
                status.Text = "Ready"
                status.TextColor3 = Color3.fromRGB(140, 200, 255)
            end
        end)
    end

    btn.MouseButton1Click:Connect(doTeleport)

    -- Hover effect
    btn.MouseEnter:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.18), {BackgroundColor3 = Color3.fromRGB(80, 180, 255)}):Play()
    end)

    btn.MouseLeave:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.18), {BackgroundColor3 = Color3.fromRGB(60, 160, 255)}):Play()
    end)

    print("Modern Soccer GUI loaded - balls now teleport through walls/floors/everything")
    return sg
end

-- Initial creation
createGUI()

-- Respawn-proof: recreate if GUI disappears
player.CharacterAdded:Connect(function()
    task.wait(1.5)
    if not player.PlayerGui:FindFirstChild("ModernSoccerGui") then
        createGUI()
    end
end)

print("GUI auto-recreate on respawn active")
